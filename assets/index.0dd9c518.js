import{j as M,r as p,R as E,a as B}from"./vendor.9ad31691.js";const A=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=i(e);fetch(e.href,n)}};A();const a=M.exports.jsx,h=M.exports.jsxs;function L(o){const{row:u,col:i,value:s,click:e,mine:n}=o;return a("div",{className:"node",id:o.id,onClick:c=>e(c,n),children:s})}function F(o,u,i){const s=[];for(let n=0;n<o;n++)for(let c=0;c<u;c++)s.push({x:n,y:c});const e=[];for(;i--;){let n=s.splice(Math.floor(Math.random()*s.length),1);e.push(n[0])}return e}function g(o,u,i){let s=0;for(let e=-1;e<=1;e++)for(let n=-1;n<=1;n++)Array.isArray(i)&&i[o+e]&&i[o+e][u+n]&&i[o+e][u+n]==1&&s++;return s}function x(o,u,i){const s=new Array;for(let e=0;e<o;e++)s.push(new Array(u).fill(0));return s}function O(o){let u=0;for(let i=0;i<o.length;i++)for(let s=0;s<o[0].length;s++)o[i][s]==1&&u++;return u}function C(o,u,i){const s=F(o,u,i),e=x(o,u),n=x(o,u);for(let c=0;c<i;c++)n[s[c].x][s[c].y]=1;for(let c=0;c<o;c++)for(let m=0;m<u;m++)e[c][m]=g(c,m,n);return e}function S(o,u){const i=o.length,s=o[0].length,e=x(i,i),n=[],c=t=>{for(let l=t;l<i;l++)for(let f=0;f<s;f++)n.push({x:l,y:f,class:"node"})},m=(t,l)=>{if(t>=i||l>=s)return!1;e[t][l]=0;let f=g(t-1,l-1,e);return f==o[t-1][l-1]?(e[t][l]=0,n.push({x:t,y:l,class:"safe"}),!0):f==o[t-1][l-1]-1?(e[t][l]=1,n.push({x:t,y:l,class:"mine"}),!0):(n.push({x:t,y:l,class:"err"}),!1)},N=()=>{c(0);let t=0;for(;e[0][t]!=0&&t<=s-1;)t++;if(t==s){for(let l=0;l<s;l++)n.push({x:0,y:l,class:"backtrack"}),n.push({x:1,y:l,class:"mine"});return!1}e[0][t]=1;for(let l=0;l<t;l++)e[0][l]=0;for(let l=0;l<s;l++)n.push({x:0,y:l,class:"backtrack"}),e[0][l]==0?n.push({x:0,y:l,class:"safe"}):n.push({x:0,y:l,class:"mine"});return!0},v=()=>{for(let t=0;t<s;t++)if(g(i-1,t,e)!=o[i-1][t])return n.push({x:i-1,y:t,class:"error"}),!1;return!0},y=t=>{if(c(t),t==0||t>i)return!1;for(let l=0;l<=1;l++){e[t][0]=l,n.push({x:t,y:0,class:"backtrack"}),l==0?n.push({x:t,y:0,class:"safe"}):n.push({x:t,y:0,class:"mine"});let f=1;for(;m(t,f);)f++;if(f==s&&g(t-1,s-1,e)!=o[t-1][s-1]&&n.push({x:t,y:f-1,class:"error"}),f==s&&g(t-1,s-1,e)==o[t-1][s-1])if(t==i-1){if(v()&&O(e)==u)return{mapMine:e,cellStatus:[...n]}}else return y(t+1)}return!1};for(let t=0;t<s;t++)n.push({x:0,y:t,class:"backtrack"}),n.push({x:0,y:t,class:"safe"});do{let t=y(1);if(t)return t}while(N())}function I(){const[o,u]=p.exports.useState(5),[i,s]=p.exports.useState(5),[e,n]=p.exports.useState(13),[c,m]=p.exports.useState([]),[N,v]=p.exports.useState([]),[y,t]=p.exports.useState({}),[l,f]=p.exports.useState(0);p.exports.useEffect(()=>{let r=C(i,o,e);t(S(r,e)),v(r)},[]);const j=p.exports.useCallback((r,d)=>{if(d)r.target.className+=" mine",document.getElementById("you-lose").style.display="block";else{r.target.className+=" safe";let b=[...c];b.push(r.target.id),m([...new Set(b)]),c.length===i*o-e-1&&(document.getElementById("you-won").style.display="block",m([]))}}),w=p.exports.useCallback(()=>{document.getElementById("you-lose").style.display="none",document.getElementById("you-won").style.display="none";for(let r=0;r<i;r++)for(let d=0;d<o;d++)document.getElementById(`node-${r}-${d}`).className="node"}),R=()=>{let r=C(i,o,e);t(S(r,e)),v(r),w()};function $(r){return new Promise(d=>setTimeout(d,r*300))}return h("div",{children:[a("div",{className:"header",children:h("div",{className:"create-matrix",children:[h("div",{className:"input-container",children:[a("label",{htmlFor:"input-row",children:"Row"}),a("input",{type:"number",name:"input-row",id:"input-row",value:i,onChange:r=>s(r.target.value)})]}),h("div",{className:"input-container",children:[a("label",{htmlFor:"input-col",children:"Col"}),a("input",{type:"number",name:"input-col",id:"input-col",value:o,onChange:r=>u(r.target.value)})]}),h("div",{className:"input-container",children:[a("label",{htmlFor:"input-mine",children:"Mine"}),a("input",{type:"number",name:"input-mine",id:"input-mine",value:e,onChange:r=>n(r.target.value)})]}),h("div",{className:"input-container",children:[a("label",{htmlFor:"input-time",children:"Time"}),a("input",{type:"number",name:"input-time",id:"input-time",value:l,onChange:r=>f(r.target.value)})]}),a("button",{type:"submit",onClick:R,children:"New Map"}),a("button",{type:"submit",onClick:w,children:"Clear"}),a("button",{type:"submit",onClick:async()=>{w();for(var r of y.cellStatus)if(r.class=="node")document.getElementById(`node-${r.x}-${r.y}`).className="node";else{(r.class=="mine"||r.class=="safe"||r.class=="error")&&await $(l);let d=document.getElementById(`node-${r.x}-${r.y}`);d.className.includes("backtrack")?d.className=`node ${r.class}`:d.className=`node backtrack ${r.class}`}},children:"Solve"})]})}),a("h1",{id:"you-won",children:"You Won"}),a("h1",{id:"you-lose",children:"You Lose"}),a("div",{className:"grid",children:N.map((r,d)=>a("div",{className:"row",children:r.map((b,k)=>a(L,{id:`node-${d}-${k}`,col:k,row:d,value:b,mine:y.mapMine[d][k],click:j},k))},d))}),h("div",{className:"footer",style:{marginBottom:0,display:"flex"},children:[h("div",{style:{display:"inline-block"},children:[a("div",{className:"node backtrack",style:{border:"yellow solid 2px"}}),a("span",{children:"Backtrack"}),a("br",{}),a("div",{className:"node mine"}),a("span",{children:"Has mine"})]}),a("br",{}),h("div",{style:{display:"inline-block",marginInlineStart:"20px"},children:[a("div",{className:"node safe"}),a("span",{children:"Safe"}),a("br",{}),a("div",{className:"node error",style:{border:"orange solid 2px"}}),a("span",{children:"Error"})]})]})]})}E.render(a(B.StrictMode,{children:a(I,{})}),document.getElementById("root"));
